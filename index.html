<!DOCTYPE html>
<html lang="cs">
<head>
    <link rel="manifest" href="manifest.json">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Moje Knihovna</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="loginScreen">
        <div class="login-box">
            <h1>Knihovna Login</h1>
            <div id="loginError" class="error-msg">≈†patn√© jm√©no nebo heslo.</div>
            <input type="text" id="usernameInput" placeholder="U≈æivatelsk√© jm√©no">
            <input type="password" id="passwordInput" placeholder="Heslo">
            <button onclick="login()">P≈ôihl√°sit se</button>
            <button class="btn-secondary" onclick="register()">Vytvo≈ôit nov√Ω √∫ƒçet</button>
        </div>
    </div>

    <div id="appScreen">
        <aside class="sidebar">
            <h2>Knihovna</h2>
            <ul id="menuList">
                <li class="active" onclick="setActiveMenu(this); renderBooks()">Hlavn√≠ str√°nka</li>
                <li onclick="setActiveMenu(this); filterByOwnership('Vlastn√≠')">Moje knihy</li>
                <li onclick="setActiveMenu(this); filterByReadingStatus('Doƒçteno')">P≈ôeƒçten√©</li>
                <li onclick="setActiveMenu(this); filterByOwnership('P≈Øjƒçeno (ciz√≠)')">P≈Øjƒçen√©</li>
                <li onclick="setActiveMenu(this); filterWishlist()">Wishlist</li>
            </ul>
            
            <div class="sidebar-bottom">
                <div class="add-btn" onclick="openModal()">+ P≈ôidat knihu</div>
                <div class="user-info">P≈ôihl√°≈°en: <strong id="loggedUserName"></strong></div>
                <div class="logout-btn" onclick="logout()">Odhl√°sit</div>
            </div>
        </aside>

        <main class="main-content">
            <div class="header-top">
                <h1 id="pageTitle">V≈°echny knihy</h1>
                <input type="text" id="searchInput" class="search-bar" placeholder="Hledat podle n√°zvu nebo autora..." onkeyup="searchBooks()">
            </div>
            <div class="books-grid" id="booksGrid"></div>
        </main>

        <aside class="right-panel">
            <h3>Form√°t</h3>
            <ul class="filter-list">
                <li onclick="filterByFormat('Fyzick√°')">Fyzick√° kniha</li>
                <li onclick="filterByFormat('E-book')">E-book</li>
            </ul>
            <h3>Jazyk</h3>
            <ul class="filter-list" id="languageList"></ul>
            <h3>≈Ω√°nry</h3>
            <ul class="filter-list" id="genreList"></ul>
            <h3>Stav ƒçten√≠</h3>
            <ul class="filter-list">
                <li onclick="filterByReadingStatus('Ve ƒçten√≠')">Rozeƒçteno</li>
                <li onclick="filterByReadingStatus('Doƒçteno')">P≈ôeƒçteno</li>
                <li onclick="filterByReadingStatus('Nep≈ôeƒçteno')">Nep≈ôeƒçteno</li>
            </ul>
        </aside>
    </div>

    <div class="modal-overlay" id="bookModal">
        <div class="modal">
            <h2 id="modalTitle">Nov√° kniha</h2>
            <form id="bookForm" onsubmit="saveBook(event)">
                <input type="hidden" id="bookId">
                <div class="form-group">
                    <label>N√°zev knihy</label>
                    <input type="text" id="bTitle" required>
                </div>
                <div class="form-group">
                    <label>Autor</label>
                    <input type="text" id="bAuthor" list="authorDatalist" required>
                    <datalist id="authorDatalist"></datalist>
                </div>
                <div class="form-group">
                    <label>URL obr√°zku ob√°lky (voliteln√©)</label>
                    <input type="url" id="bCover">
                </div>
                <div class="form-group">
                    <label>Jazyk knihy</label>
                    <select id="bLanguage">
                        <option value="ƒåe≈°tina">ƒåe≈°tina</option>
                        <option value="Sloven≈°tina">Sloven≈°tina</option>
                        <option value="Angliƒçtina">Angliƒçtina</option>
                        <option value="Nƒõmƒçina">Nƒõmƒçina</option>
                        <option value="Jin√©">Jin√©</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>≈Ω√°nry (lze vybrat v√≠ce)</label>
                    <div class="checkbox-group" id="bGenresContainer"></div>
                </div>
                <div class="form-row">
                    <div class="form-group" style="flex: 1;">
                        <label>Form√°t</label>
                        <select id="bFormat">
                            <option value="Fyzick√°">Fyzick√° kniha</option>
                            <option value="E-book">E-book</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label>Stav ƒçten√≠</label>
                        <select id="bReadStatus">
                            <option value="Nep≈ôeƒçteno">Nep≈ôeƒçteno</option>
                            <option value="Ve ƒçten√≠">Rozeƒçteno</option>
                            <option value="Doƒçteno">Doƒçteno</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Vlastnictv√≠</label>
                    <select id="bOwnership">
                        <option value="Vlastn√≠">Vlastn√≠m</option>
                        <option value="P≈Øjƒçeno (ciz√≠)">M√°m p≈Øjƒçeno</option>
                        <option value="P≈Øjƒçeno (jin√Ωm)">P≈Øjƒçil jsem</option>
                        <option value="Wishlist">Wishlist</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Hodnocen√≠ (1-5)</label>
                    <input type="number" id="bRating" min="1" max="5">
                </div>
                
                <div class="form-group" id="deleteBtnContainer" style="display:none; text-align:right;">
                    <a href="#" style="color:#ef4444; font-size:13px; text-decoration:none;" onclick="deleteBook()">üóëÔ∏è Smazat tuto knihu</a>
                </div>

                <div class="btn-group">
                    <button type="button" class="btn-close" onclick="closeModal()">Zru≈°it</button>
                    <button type="submit" class="btn-submit">Ulo≈æit knihu</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
